{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.tsx","webpack:///external \"React\"","webpack:///external \"ReactDOM\"","webpack:///./node_modules/favico.js/favico.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","globalShowError","resp","errorTimeout","colors","gemColors","concat","levelNames","mapColors","gems","game","callback","symbol","uuid","map","color","cName","className","onClick","mapNobles","nobles","noble","Noble","padStart","str","targetLength","padString","String","length","CountDown","React","forwardRef","seconds","onCountdownOver","getTurn","ref","h","Math","floor","paused","setPaused","useState","over","setOver","time","setTime","hours","minutes","useImperativeHandle","reset","document","getElementById","pause","useEffect","timerID","setInterval","console","log","play","clearInterval","toString","Card","PureComponent","card","this","props","buyer","buy","reserver","e","preventDefault","reserve","level","id","src","points","cost","visit","requirement","Player","state","editingName","editName","setState","target","focusName","select","submitName","rename","keypress","pid","playerSelector","selectPlayer","collection","set","cards","stats","Fragment","you","youName","discard","reserved","reservedCount","nreserved","type","autoFocus","onKeyPress","onFocus","onBlur","onChange","turn","selectedPlayer","Level","remaining","Game","super","players","chat","decks","winner","error","phase","showChat","showLog","chatNotify","isMyTurn","updateState","favicon","badge","alert","lastLocalChat","lastRemoteChat","msg","scroller","getElementsByClassName","scrollTop","scrollHeight","loginArgs","take","act","confirm","player","fetch","gid","method","json","action","nextTurn","poll","handleReset","stat","chatBox","which","body","JSON","stringify","countdownRef","current","handleCountdownOver","handleGetTurn","createRef","turnTimeout","score","logLine","chatLine","levels","style","bottom","opacity","ErrorMsg","GameCreator","startKey","loading","lobby","joined","gameName","errorOpacity","creating","join","session","readSession","save","status","showError","createGame","result","clear","clearTimeout","setTimeout","headers","history","replaceState","start","window","localStorage","getItem","parse","saveRaw","startGame","nameChange","timeoutChange","Number","keyPress","location","pathname","then","substring","href","Favico","position","onclick","ReactDOM","render","opt","_opt","_orig","_h","_w","_canvas","_context","_img","_ready","_lastBadge","_running","_readyCb","_stop","_browser","_animTimeout","_drawTimeout","_doc","_def","bgColor","textColor","fontFamily","fontStyle","animation","elementId","dataUrl","win","ff","InstallTrigger","chrome","opera","navigator","userAgent","indexOf","ie","safari","HTMLElement","supported","_queue","icon","clearRect","drawImage","link","setIcon","run","forEach","a","options","shift","abs","x","y","w","len","circle","more","beginPath","font","textAlign","moveTo","lineTo","quadraticCurveTo","arc","PI","fillStyle","g","b","fill","closePath","stroke","fillText","rectangle","fillRect","drawVideo","video","ended","duration","hexToRgb","hex","replace","exec","parseInt","merge","def","attrname","mergedOpt","getIcon","elm","element","setAttribute","getAttribute","getElementsByTagName","test","getLink","createElement","appendChild","canvas","url","toDataURL","old","parentNode","removeChild","types","fade","none","pop","popFade","slide","cb","revert","step","animationType","hidden","msHidden","webkitHidden","mozHidden","toLowerCase","isUp","isLeft","hasAttribute","onload","height","width","getContext","ready","init","number","opts","q","push","Error","message","videoElement","addEventListener","image","imageElement","newImg","ratio","webcam","URL","createObjectURL","obj","newVideo","getUserMedia","oGetUserMedia","msGetUserMedia","mozGetUserMedia","webkitGetUserMedia","audio","stream","browser"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import * as React from \"react\"\nimport * as ReactDOM from \"react-dom\"\nimport \"favico.js\"\n\nconst MAX_PLAYER = 5\n\ntype ColorT = 'w' | 'u' | 'g' | 'b' | 'r'\ntype GemT = ColorT | '*'\n\ninterface CostT {\n  w?: number\n  u?: number\n  g?: number\n  b?: number\n  r?: number\n}\n\ninterface GemsT extends CostT {\n  '*'?: number\n}\n\ninterface CardT {\n  color: string\n  points: number\n  uuid: string\n  cost: CostT\n  level: string\n}\n\ninterface CardsT {\n  w?: CardT[]\n  u?: CardT[]\n  g?: CardT[]\n  b?: CardT[]\n  r?: CardT[]\n}\n\ninterface NobleT {\n  id: number\n  points: number\n  uuid: string\n  requirement: CostT\n}\n\ninterface PlayerT {\n  id: number\n  name: string\n  uuid: string\n  reserved: CardT[]\n  nobles: NobleT[]\n  cards: CardsT\n  gems: GemsT\n  score: number\n}\n\ninterface LogT {\n  pid: number\n  time: number\n  msg: string\n}\n\ninterface GameT {\n  players: PlayerT[]\n  cards: { [level: string]: CardT[] }\n  decks: { [level: string]: number }\n  log: LogT[]\n  gems: GemsT\n  nobles: NobleT[]\n  winner: number | null\n  turn: number\n}\n\ninterface ChatT {\n  time: number\n  pid: number\n  name: string\n  msg: string\n}\n\ninterface GameState extends GameT {\n  mode: string\n  selectedPlayer: number\n  phase: string\n  showChat: boolean\n  showLog: boolean\n  chat: ChatT[]\n  chatNotify: boolean\n}\n\ninterface ServerResponse {\n  error?: string\n  state: GameT\n  chat: ChatT[]\n  status?: number\n  result: {\n    error?: string\n  }\n}\n\nlet globalShowError = (resp: ServerResponse) => { return false }\n\n(function () {\n  let errorTimeout = 0\n  const colors = ['b', 'u', 'w', 'g', 'r']\n  const gemColors = colors.concat(['*'])\n  const levelNames = ['level1', 'level2', 'level3']\n\n  function mapColors(gems: GemsT, game: Game, callback: (color: GemT) => void, symbol: string, uuid: string | number) {\n    return gemColors.map((color: GemT) => {\n      var cName = color + \"chip\"\n      if (color === '*') cName = \"schip\"\n      return (\n        <div className={\"gem \" + cName} key={color + \"_colors_\" + uuid} onClick={callback.bind(game, color)}>\n          <div className=\"bubble\" onClick={callback.bind(game, color)}>{gems[color]}</div>\n          <div className=\"underlay\" onClick={callback.bind(game, color)}>{symbol}</div>\n        </div>\n      );\n    });\n  }\n\n  function mapNobles(nobles: NobleT[], game: Game) {\n    return nobles.map((noble) => {\n      return (\n        <Noble key={noble.uuid} noble={noble} game={game}/>\n      );\n    });\n  }\n\n  function padStart(str: string | number, targetLength: number, padString: string = '0'): string {\n    str = String(str); // 将输入转换为字符串\n    while (str.length < targetLength) {\n      str = padString + str;\n    }\n    return str;\n  }\n\n  interface CountDownProps {\n    seconds: number;\n    onCountdownOver: () => void; // 父组件传递的倒计时结束时触发的函数\n    getTurn: ()=> number;\n  }\n\n  const CountDown = React.forwardRef<{ reset: () => void }, CountDownProps>(({ seconds = 0, onCountdownOver, getTurn }, ref) => {\n    const h = Math.floor(seconds / 3600)\n    const m = Math.floor((seconds % 3600) / 60)\n    const s = seconds % 60\n\n    const [paused, setPaused] = React.useState(true);\n    const [over, setOver] = React.useState(false);\n    // time 默认值是一个 object\n    const [time, setTime] = React.useState({\n      hours: h,\n      minutes: m,\n      seconds: s\n    });\n\n    const tick = () => {\n      console.log(\"ticking\")\n      // 暂停，或已结束\n      if (paused || over || getTurn() < 0) return;\n\n      if (time.hours === 0 && time.minutes === 0 && time.seconds <= 10){\n        (document.getElementById(\"timeout\") as HTMLAudioElement).play();\n      }\n\n\n      if (time.hours === 0 && time.minutes === 0 && time.seconds === 0){\n        setOver(true);\n        onCountdownOver();\n      }\n      else if (time.minutes === 0 && time.seconds === 0)\n        setTime({\n          hours: time.hours - 1,\n          minutes: 59,\n          seconds: 59\n        });\n      else if (time.seconds === 0)\n        setTime({\n          hours: time.hours,\n          minutes: time.minutes - 1,\n          seconds: 59\n        });\n      else\n        setTime({\n          hours: time.hours,\n          minutes: time.minutes,\n          seconds: time.seconds - 1\n        });\n    };\n\n    // // 重置\n    // const reset = () => {\n    //   setTime({\n    //     hours: h,\n    //     minutes: m,\n    //     seconds: s\n    //   });\n    //   setPaused(false);\n    //   setOver(false);\n    // };\n\n    React.useImperativeHandle(ref, () => ({\n      reset: () => {\n        (document.getElementById(\"timeout\") as HTMLAudioElement).pause();\n        setTime({\n          hours: h,\n          minutes: m,\n          seconds: s\n        });\n        setPaused(false);\n        setOver(false);\n      },\n      pause: ()=>{\n        setPaused(true);\n      }\n    }));\n\n    React.useEffect(() => {\n      // 执行定时\n      let timerID = setInterval(() => tick(), 1000);\n      // 卸载组件时进行清理\n      return () => clearInterval(timerID);\n    });\n\n    return (\n      <div className=\"timer\">\n        <p>{`当前回合自动跳过倒计时 ${padStart(time.hours.toString(), 2)}:${padStart(time.minutes.toString(), 2)}:${padStart(time.seconds.toString(), 2)}`}</p>\n      </div>\n    );\n  })\n\n  class Card extends React.PureComponent<{ card: CardT, game: Game }, {}> {\n    render() {\n      const card = this.props.card\n      const game = this.props.game\n      var buyer = game.buy.bind(game, card.uuid)\n      const reserver = (e: React.MouseEvent<HTMLDivElement>) => {\n        e.preventDefault();\n        game.reserve.bind(game)(card.uuid)\n      }\n\n      if (card.color) {\n        return (\n          <div\n            className={\"card card-\" + card.color + \" card-\" + card.level}\n            id={card.uuid}\n          >\n            <div className=\"reserve\" onClick={reserver}>\n              <img className=\"floppy\" src=\"client/img/floppy.png\" />\n            </div>\n            <div className=\"overlay\" onClick={buyer}></div>\n            <div className=\"underlay\">\n              <div className=\"header\">\n                <div className={\"color \" + card.color + \"gem\"}>\n                </div>\n                <div className=\"points\">\n                  {card.points > 0 && card.points}\n                </div>\n              </div>\n              <div className=\"costs\">\n                {colors.map((color: ColorT) => {\n                  if(card.cost[color] > 0) {\n                    return (\n                      <div\n                        key={card.uuid + \"_cost_\" + color}\n                        className={\"cost \" + color}\n                      >\n                        {card.cost[color]}\n                      </div>\n                    )\n                  }\n                })}\n              </div>\n            </div>\n          </div>\n        );\n      } else {\n        return (\n          <div className = {\"deck \" + card.level}></div>\n        )\n      }\n    }\n  }\n\n  class Noble extends React.PureComponent<{ noble: NobleT, game: Game }, {}> {\n    render() {\n      const noble = this.props.noble\n      const game = this.props.game\n      const visit = game.noble.bind(game, noble.uuid)\n\n      return (\n        <div className=\"noble\" onClick={visit} id={\"noble\" + noble.id}>\n          <div className=\"side-bar\">\n            <div className=\"points\">\n              {noble.points > 0 && noble.points}\n            </div>\n            <div className=\"requirement\">\n              {colors.map((color: ColorT) => {\n                if(noble.requirement[color] > 0) {\n                  return (\n                    <div\n                      key={noble.uuid + \"_req_\" + color}\n                      className={\"requires \" + color}\n                    >\n                      {noble.requirement[color]}\n                    </div>\n                  )\n                }\n              })}\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  interface PlayerProps {\n    game: Game\n    pid: number\n    cards: CardsT\n    gems: GemsT\n    name: string\n    points: number\n    nobles: NobleT[]\n    reserved: CardT[]\n    nreserved: number\n    selectedPlayer: number\n    turnTimeout: number\n  }\n\n  class Player extends React.PureComponent<PlayerProps, { editingName: string | null }> {\n    state = { editingName: null as string | null }\n\n    editName = (e: React.ChangeEvent<HTMLInputElement>) => {\n      this.setState({ editingName: e.target.value })\n    }\n\n    focusName = (e: React.FocusEvent<HTMLInputElement>) => {\n      e.target.select()\n    }\n\n    submitName = () => {\n      this.props.game.rename(this.state.editingName);\n      this.setState({ editingName: null })\n    }\n\n    keypress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === \"Enter\") {\n        this.submitName()\n      }\n    }\n\n    render() {\n      const game = this.props.game\n      const pid = this.props.pid\n      const playerSelector = game.selectPlayer.bind(game, pid)\n      const collection: { [color: string]: { cards: number, gems: number } } = {}\n\n      gemColors.map((color: ColorT) => {\n        collection[color] = {'cards': 0, 'gems': this.props.gems[color]};\n      })\n\n      const set = colors.map((color: ColorT) => {\n        var cards = this.props.cards[color].map((card: CardT) => {\n          collection[color]['cards'] += 1;\n          return (\n            <div\n              key={pid + \"_card_\" + card.uuid}\n              className=\"colorSetInner\"\n            >\n              <Card key={card.uuid} card={card} game={game}/>\n            </div>\n          );\n        })\n        return (\n          <div key={pid + \"_set_\" + color} className=\"colorSet\">\n            {cards}\n            <div className={cards.length > 0 ? \"endcap\" : \"spacer\"}></div>\n          </div>\n        )\n      })\n\n      const stats = gemColors.map((color) => {\n        return (\n          <div className=\"statSet\" key={\"stat\" + color}>\n            <div className={`stat stat${color === '*' ? 'y' : color}`}>{collection[color]['gems'] + (color == '*' ? '' : ' / ' + collection[color]['cards'])}</div>\n            {color === '*' ? <React.Fragment /> : <div><img className=\"labelImg\" src=\"client/img/labels.png\" /></div>}\n          </div>\n        )\n      })\n\n      const you = (game.props.pid === pid ? \" you selected\" : \"\")\n      // const youName = (game.props.pid === pid ? \" (you)\" : \"\")\n      const youName = (game.props.pid === pid ? \" (你)\" : \"\")\n      const gems = mapColors(this.props.gems, game, game.discard, 'X', pid)\n      const reserved = this.props.reserved ? this.props.reserved.map((card) => {\n        return (\n          <Card key={card.uuid + \"_inner\"} card={card} game={game}/>\n        );\n      }) : []\n      const reservedCount = this.props.reserved ? reserved.length : this.props.nreserved\n      const nobles = mapNobles(this.props.nobles, game)\n\n      return (\n        <div className={\"player\" + you}>\n          <div className=\"playerHeader\">\n            <div className=\"playerPoints\">{this.props.points}</div>\n            {this.state.editingName == null ?\n              <>\n                <div className=\"playerName\" onClick={playerSelector}>{this.props.name}</div>\n                {game.props.pid === pid && this.state.editingName == null ?\n                  <div className=\"pencil\" onClick={() => this.setState({ editingName: this.props.name })}>✏️</div> : <React.Fragment />\n                }\n              </> :\n              <div className=\"playerName\">\n                <input className=\"nameInput\" type=\"text\" value={this.state.editingName} autoFocus={true} onKeyPress={this.keypress} onFocus={this.focusName} onBlur={this.submitName} onChange={this.editName} />\n              </div>\n            }\n            <div className=\"playerName2\">{youName}</div>\n            {game.state.turn === pid &&\n              <div className=\"turnIndicator\">&#8592;</div>\n            }\n          </div>\n          {game.state.selectedPlayer === pid ?\n            <div className=\"floater\">\n              <div className=\"cards\">\n                {set}\n              </div>\n              <div className=\"nobles\">\n                {nobles}\n              </div>\n              <div className=\"gems\">\n                {gems}\n              </div>\n              <div className=\"reserveArea\">\n                { reservedCount > 0 &&\n                  <div>\n                    <div className=\"reserveText\">\n                      reserved\n                    </div>\n                    <div className=\"reserveCards\">\n                      {reserved}\n                    </div>\n                  </div>\n                }\n              </div>\n            </div> :\n            <div className=\"stats\">\n              <div className=\"gem-stats\">{stats}</div>\n              <div className=\"reservedStat\">\n                {reserved}\n              </div>\n            </div>\n          }\n        </div>\n      );\n    }\n  }\n\n  class Level extends React.PureComponent<{ name: string, remaining: number, game: Game, cards: CardT[] }, {}> {\n    render() {\n      return (\n        <div>\n          <div className={\"deck \" + this.props.name}>\n            <div className=\"remaining\">\n              {this.props.remaining}\n            </div>\n            <div className=\"overlay\"></div>\n            <div className=\"reserve\" onClick={this.props.game.reserve.bind(this.props.game, this.props.name)}>\n              <img className=\"floppy\" src=\"client/img/floppy.png\" />\n            </div>\n          </div>\n          <div className={\"c_\" + this.props.name + \" face-up-cards\"}>\n            <div className=\"cards-inner\">\n              {this.props.cards && this.props.cards.map((card) =>\n                <Card key={card.uuid} card={card} game={this.props.game}/>\n              )}\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  class Game extends React.PureComponent<{ gid: string, pid: number, uuid: string, turnTimeout: number }, GameState> {\n    state = {\n      players: [],\n      gems: {},\n      cards: {},\n      chat: [],\n      decks: {},\n      nobles: [],\n      log: [],\n      turn: -1,\n      winner: null,\n      mode: \"normal\",\n      error: null,\n      selectedPlayer: -1,\n      phase: \"pregame\",\n      showChat: false,\n      showLog: false,\n      chatNotify: false,\n    } as GameState\n    countdownRef: React.RefObject<{ reset: () => void }>;\n\n    constructor(props: { gid: string; pid: number; uuid: string; turnTimeout: number } | Readonly<{ gid: string; pid: number; uuid: string; turnTimeout: number }>) {\n      super(props);\n      // 使用 React.createRef() 初始化 ref\n      this.countdownRef = React.createRef();\n    }\n\n    isMyTurn = (turn: number) => {\n      return (turn == this.props.pid);\n    }\n\n    updateState = (r: ServerResponse) => {\n      if (r.state) {\n        var myTurn = this.isMyTurn(r.state.turn);\n        if (!myTurn) this.setState({mode: \"waiting\"});\n        else {\n          if (this.state.mode == \"waiting\") {\n            favicon.badge('!' as any);\n            (document.getElementById(\"notify\") as HTMLAudioElement).play();\n          }\n          this.setState({mode: \"normal\"});\n        }\n\n        if (this.state.selectedPlayer == -1 && this.props.pid < MAX_PLAYER) {\n          this.setState({selectedPlayer: this.props.pid});\n        }\n\n        this.setState({\n          log: r.state.log,\n          cards: r.state.cards,\n          decks: r.state.decks,\n          players: r.state.players,\n          gems: r.state.gems,\n          nobles: r.state.nobles,\n          turn: r.state.turn,\n        });\n\n        if (r.state.winner !== null && this.state.phase != \"postgame\") {\n          // alert(r.state.players[r.state.winner].name + \" wins!\");\n          alert(r.state.players[r.state.winner].name + \" 获得胜利！！!\");\n          this.setState({phase: \"postgame\"});\n        }\n\n        if (r.chat) {\n          var chat = this.state.chat;\n          if (chat && chat[chat.length - 1] && r.chat[r.chat.length -1]) {\n            var lastLocalChat = chat[chat.length - 1];\n            var lastRemoteChat = r.chat[r.chat.length - 1];\n            if (lastLocalChat.msg != lastRemoteChat.msg && lastRemoteChat.pid != this.props.pid) {\n              favicon.badge('.' as any);\n              (document.getElementById(\"notify\") as HTMLAudioElement).play();\n              if (!this.state.showChat) this.setState({ chatNotify: true })\n            }\n          }\n          this.setState({ chat: r.chat });\n        }\n\n        for (const scroller of document.getElementsByClassName(\"scroller\")) {\n          scroller.scrollTop = scroller.scrollHeight\n        }\n      }\n    }\n\n    loginArgs = () => {\n      return '?pid=' + this.props.pid + '&uuid=' + this.props.uuid\n    }\n\n    take = (color: string) => {\n      this.act('take', color)\n    }\n\n    discard = (color: string) => {\n      // if (confirm(\"Are you sure you want to discard a gem?\")) {\n      if (confirm(\"您确定要放弃这个宝石吗？\")) {\n        this.act('discard', color)\n      }\n    }\n\n    selectPlayer = (player: number) => {\n      this.setState({ selectedPlayer: player })\n    }\n\n    buy = (uuid: string) => {\n      this.act('buy', uuid)\n    }\n\n    reserve = (uuid: string) => {\n      this.act('reserve', uuid)\n    }\n\n    noble = (uuid: string) => {\n      this.act('noble_visit', uuid);\n    }\n\n    rename = async (name: string) => {\n      const resp = await fetch(`/rename/${this.props.gid}/${name}${this.loginArgs()}`, { method: 'POST' })\n      const json = await resp.json()\n      globalShowError(json)\n    }\n\n    act = async (action: string, target: string) => {\n      const resp = await fetch('/game/' + this.props.gid + '/' + action + '/' + target + this.loginArgs(), { method: 'POST' })\n      const json = await resp.json()\n      if (!globalShowError(json)) this.updateState(json)\n    }\n\n    nextTurn = async () => {\n      const resp = await fetch('/game/' + this.props.gid + '/next' + this.loginArgs(), { method: 'POST' })\n      const json = await resp.json()\n      if (!globalShowError(json)) this.updateState(json)\n    }\n\n    poll = async () => {\n      const resp = await fetch('/poll/' + this.props.gid + this.loginArgs())\n      const json = await resp.json()\n      this.handleReset()\n      if (!globalShowError(json)) {\n        this.updateState(json)\n        this.poll()\n\n      }\n    }\n\n    stat = async () => {\n      const resp = await fetch(`/stat/${this.props.gid}${this.loginArgs()}`)\n      const json = await resp.json()\n      if (!globalShowError(json)) this.updateState(json)\n    }\n\n    componentDidMount() {\n      this.stat()\n      this.poll()\n    }\n\n    chat = async (e: React.KeyboardEvent<HTMLInputElement>) => {\n      const chatBox = document.getElementById(\"chat-inner\") as HTMLInputElement\n      if (e.which == 13) {\n        const resp = await fetch('/game/' + this.props.gid + '/chat' + this.loginArgs(), {\n          method: 'POST',\n          body: JSON.stringify({ msg: chatBox.value }),\n        })\n        chatBox.value = \"\"\n        const json = await resp.json()\n        if (!globalShowError(json)) this.updateState(json)\n      }\n    }\n\n    handleReset = () => {\n      if (this.countdownRef.current) {\n        this.countdownRef.current.reset(); // 调用子组件的 reset 方法\n      }\n    };\n    handleCountdownOver = () => {\n      console.log('倒计时结束！');\n      if(this.isMyTurn(this.state.turn)){\n        this.nextTurn()\n      }\n      // this.handleReset();\n      // 在这里执行你需要的逻辑，例如展示提示或触发某个事件\n    };\n\n    handleGetTurn = () =>{\n      return this.state.turn\n    }\n\n    render() {\n      var players = this.state.players.map((player) => {\n        return (\n          <Player\n            selectedPlayer={this.state.selectedPlayer}\n            key={player.uuid}\n            pid={player.id}\n            turnTimeout={this.props.turnTimeout}\n            name={player.name}\n            points={player.score}\n            game={this}\n            cards={player.cards}\n            nobles={player.nobles}\n            gems={player.gems}\n            reserved={player.reserved}\n            nreserved={player.reserved.length}\n          />\n        );\n      });\n      var gems = mapColors(this.state.gems, this, this.take, '', 'game');\n      var nobles = mapNobles(this.state.nobles, this);\n      var log = this.state.log.map((logLine, i) => {\n        return (\n          <div key={\"log-line-\" + i} className=\"line\">\n            <span className=\"pid\">{\"[\" + logLine.pid + \"] \"}</span>\n            <span className=\"msg\">{logLine.msg}</span>\n          </div>\n        );\n      });\n      var chat = this.state.chat.map((chatLine, i) => {\n        return (\n          <div key={\"chat-line-\" + i} className=\"line\">\n            <span className={`name name${chatLine.pid}`}>{chatLine.name + \": \"}</span>\n            <span className=\"msg\">{chatLine.msg}</span>\n          </div>\n        );\n      });\n      var levels = levelNames.map((level) => {\n        return (\n          <Level\n            key = {level}\n            game = {this}\n            name = {level}\n            cards = {this.state.cards[level]}\n            remaining = {this.state.decks[level]}\n          />\n        )\n      });\n      return (\n        <div>\n          <div id=\"game-board\">\n            <div id=\"common-area\">\n              <div id=\"noble-area\" className=\"split\">\n                {nobles}\n              </div>\n              <div id=\"level-area\" className=\"split\">\n                {levels}\n              </div>\n              <div className=\"reserve-info\">\n                <div className=\"reserve-info-inner\">\n                  {/* <div>Click on card to buy, click on </div><div><img className=\"floppy\" src=\"client/img/floppy.png\" /></div><div> to reserve.</div> */}\n                  <div>点击卡面兑换, 点击 </div><div><img className=\"floppy\" src=\"client/img/floppy.png\" /></div><div>预约卡牌</div>\n                </div>\n              </div>\n              <div id=\"gem-area\" className=\"you\">\n                {gems}\n              </div>\n            </div>\n            <div id=\"player-area\">\n              <CountDown\n                seconds={this.props.turnTimeout}\n                ref={this.countdownRef}\n                onCountdownOver={this.handleCountdownOver} // 倒计时结束时触发此回调\n                getTurn={this.handleGetTurn}\n              />\n              {players}\n            </div>\n          </div>\n          <div id=\"log-box\" style={{ bottom: this.state.showLog ? -4 : -514 }}>\n            <div className=\"title\" onClick={() => this.setState({ showLog: !this.state.showLog })}>::Log</div>\n            <div className=\"scroller\">\n              {log}\n            </div>\n          </div>\n          <div id=\"chat-box\" onClick={() => this.setState({ chatNotify: false })} style={{ bottom: this.state.showChat ? -4 : -314 }}>\n            <div className={`title${ this.state.chatNotify ? \" blinking\" : \"\"}`} onClick={() => this.setState({ showChat: !this.state.showChat })}>::Chat</div>\n            <div className=\"scroller\">\n              {chat}\n            </div>\n            <div id=\"chat\">\n              <span id=\"prompt\">&gt;</span>\n              <input id=\"chat-inner\" type=\"text\" onKeyPress={this.chat}></input>\n            </div>\n          </div>\n          {this.state.turn >= 0 && this.props.pid >= 0 && this.props.pid < MAX_PLAYER &&\n            // <button id={`pass-turn`} onClick={this.nextTurn} style={{ opacity: this.isMyTurn(this.state.turn) ? 1 : 0.3 }}>Pass turn</button>\n            <button id={`pass-turn`} onClick={this.nextTurn} style={{ opacity: this.isMyTurn(this.state.turn) ? 1 : 0.3 }}>跳过回合</button>\n          }\n        </div>\n      );\n    }\n  }\n\n  const ErrorMsg = (props: { error: string | null, opacity: number }) => {\n    return <div className=\"error-box\" style={{ opacity: props.opacity }}>\n      <div className=\"error-box-inner\">{props.error}</div>\n    </div>\n  }\n\n  interface GameCreatorState {\n    startKey: string | null\n    loading: boolean\n    lobby: boolean\n    gameName: string\n    joined: boolean\n    pid: number\n    uuid: string\n    gid: string\n    error: string | null\n    errorOpacity: number\n    turnTimeout: number\n  }\n\n  class GameCreator extends React.PureComponent<{}, GameCreatorState> {\n    state = {\n      startKey: null,\n      loading: true,\n      lobby: false,\n      joined: false,\n      pid: -1,\n      uuid: '',\n      gid: '',\n      gameName: '',\n      errorOpacity: 0,\n      error: null,\n      turnTimeout: 30\n    } as GameCreatorState\n\n    creating = false\n\n    join = async (game: string, act: string) => {\n      const session = this.readSession()\n      if (session[game] && !session[game].loading && (session[game].joined || act === 'spectate')) {\n        this.setState(session[game]);\n        this.save();\n        return;\n      }\n\n      const resp = await fetch(`/${act}/${game}`, { method: 'POST' })\n      const json = await resp.json()\n      if (json.status === 404) {\n        this.createGame()\n        return\n      }\n\n      if (this.showError(json)) return\n\n      this.setState({\n        joined: (act === 'join'),\n        loading: false,\n        pid: json.id,\n        uuid: json.uuid,\n        gid: game,\n        turnTimeout: json.turnTimeout,\n      })\n      this.save()\n    }\n\n    showError = (resp: ServerResponse): boolean => {\n      let msg: string | null = null\n      if (!resp) {\n        msg = \"Request failed\";\n        return true\n      }\n      else if (!resp.error && (!resp.result || !resp.result.error)) return false;\n      else msg = resp.error || resp.result.error;\n\n      if (resp.status === 404) {\n        this.clear()\n        this.setState({ loading: true, joined: false, pid: -1, uuid: '' })\n        this.join(this.state.gid, 'spectate')\n        return true\n      }\n\n      this.setState({ error: msg, errorOpacity: 1 })\n\n      clearTimeout(errorTimeout);\n      errorTimeout = setTimeout(() => {\n        this.setState({ errorOpacity: 0 })\n      }, 4000)\n\n      return true\n    }\n\n    createGame = async () => {\n      if (this.creating) return\n      this.creating = true\n      const gameName = this.state.gid === '' ? this.state.gameName : this.state.gid\n      const resp = await fetch(`/create/${gameName}`, { method: \"POST\", headers: {'Content-Type': 'application/json'}, body: JSON.stringify({turnTimeout: this.state.turnTimeout }) })\n      const json = await resp.json()\n\n      if (this.showError(json)) return\n\n      history.replaceState(null, \"Splendor\", `/${json.game}`)\n      this.join(json.game, 'join')\n      this.setState({ startKey: json.start, loading: true, lobby: false })\n    }\n\n    readSession = () => {\n      var session = window.localStorage.getItem('splendor');\n      if (session === null) return {};\n      return JSON.parse(session);\n    }\n\n    componentDidMount() {\n      globalShowError = this.showError\n\n      if (window.location.pathname === \"/\") {\n        fetch(`/suggest`).then(async (resp) => {\n          const json = await resp.json()\n          this.setState({\n            lobby: true,\n            gameName: json.result.game,\n            loading: false,\n          })\n        })\n        return\n      }\n\n      const gid = window.location.pathname.substring(1)\n      var session = this.readSession()\n      this.setState({\n        ...session[gid],\n        gid,\n      })\n      if (this.state.loading) {\n        this.join(gid, 'spectate')\n      }\n    }\n\n    save = () => {\n      setTimeout(() => {\n        this.saveRaw(this.state)\n      }, 100)\n    }\n\n    clear = () => {\n      this.saveRaw(null)\n    }\n\n    saveRaw = (state: any) => {\n      const session = this.readSession();\n      if (state === null) delete session[this.state.gid]\n      else session[this.state.gid] = state\n      window.localStorage['splendor'] = JSON.stringify(session);\n    }\n\n    startGame = async () => {\n      const resp = await fetch(`/start/${this.state.gid}/${this.state.startKey}`, { method: \"POST\" })\n      const json = await resp.json()\n\n      if (!this.showError(json)) {\n        this.setState({ startKey: null });\n        this.save();\n      }\n    }\n\n    nameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      this.setState({ gameName: e.target.value })\n    }\n\n    timeoutChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n      this.setState({ turnTimeout: Number(e.target.value) })\n    }\n\n    keyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === \"Enter\") this.createGame()\n    }\n\n    render() {\n      if (this.state.loading) {\n        return <div id=\"game\">\n          <ErrorMsg error={this.state.error} opacity={this.state.errorOpacity} />\n        </div>\n      }\n\n      if (this.state.lobby) {\n        return <div className=\"lobby\">\n          {/* <div className=\"main-title\">Splendor</div> */}\n          <div className=\"main-title\">宝石商人</div>\n          {/* <div className=\"desc\">_(\"Play Splendor online with others. Enter a game name or use the suggested game name to start a game.\")</div> */}\n          <div className=\"desc\">输入房间名称或使用推荐房间名称开始在线玩宝石商人游戏。</div>\n          <div className=\"name\">\n            <input className=\"game-name\" type=\"text\" onChange={this.nameChange} onKeyPress={this.keyPress} value={this.state.gameName} />\n            {/* <button onClick={this.createGame} className=\"create-game\">Create Game</button> */}\n            {/* <button onClick={this.createGame} className=\"create-game\">创建游戏</button> */}\n          </div>\n          <div className=\"desc\">输入回合超时时长，玩家超时未操作则自动跳过回合，输入0禁用自动跳过。</div>\n          <div className=\"timeout\">\n            <input className=\"game-name\" type=\"number\" onChange={this.timeoutChange} onKeyPress={this.keyPress} value={this.state.turnTimeout} />\n          </div>\n          <div className=\"desc\">\n          </div>\n          <div className=\"button\">\n            {/* <button onClick={this.createGame} className=\"create-game\">Create Game</button> */}\n            <button onClick={this.createGame} className=\"create-game-button\">创建游戏</button>\n          </div>\n          <ErrorMsg error={this.state.error} opacity={this.state.errorOpacity} />\n        </div>\n      }\n\n      return (\n        <div id=\"game\">\n          <div id=\"game-title\">\n            <div className=\"link\">\n              {/* Share this link with friends to join in or watch: <a href=\".\">{`${document.location.href}`}</a> */}\n              把这个链接分享给朋友们，让他们加入或关注。: <a href=\".\">{`${document.location.href}`}</a>\n            </div>\n            <div className=\"buttons\">\n              {!this.state.joined &&\n                // <button className=\"start-game\" onClick={() => this.join(this.state.gid, 'join')}>Join Game</button>\n                <button className=\"start-game\" onClick={() => this.join(this.state.gid, 'join')}>加入房间</button>\n              }\n              {this.state.startKey && this.state.pid == 0 &&\n                // <button className=\"start-game\" onClick={this.startGame}>Start Game</button>\n                <button className=\"start-game\" onClick={this.startGame}>开始游戏</button>\n              }\n            </div>\n          </div>\n          {this.state.pid >= 0 && this.state.gid && this.state.uuid &&\n            <Game key={this.state.pid} gid={this.state.gid} pid={this.state.pid} uuid={this.state.uuid} turnTimeout={this.state.turnTimeout} />\n          }\n          <ErrorMsg error={this.state.error} opacity={this.state.errorOpacity} />\n        </div>\n      )\n    }\n  }\n\n  const favicon=new Favico({\n    position : 'up'\n  })\n\n  document.onclick = () => {\n    favicon.badge('' as any)\n  }\n\n  ReactDOM.render(\n    <div>\n      <GameCreator />\n    </div>,\n    document.getElementById('content')\n  )\n})()\n","module.exports = React;","module.exports = ReactDOM;","/**\n * @license MIT\n * @fileOverview Favico animations\n * @author Miroslav Magda, http://blog.ejci.net\n * @version 0.3.10\n */\n\n/**\n * Create new favico instance\n * @param {Object} Options\n * @return {Object} Favico object\n * @example\n * var favico = new Favico({\n *    bgColor : '#d00',\n *    textColor : '#fff',\n *    fontFamily : 'sans-serif',\n *    fontStyle : 'bold',\n *    position : 'down',\n *    type : 'circle',\n *    animation : 'slide',\n *    dataUrl: function(url){},\n *    win: top\n * });\n */\n(function () {\n\n\tvar Favico = (function (opt) {\n\t\t'use strict';\n\t\topt = (opt) ? opt : {};\n\t\tvar _def = {\n\t\t\tbgColor: '#d00',\n\t\t\ttextColor: '#fff',\n\t\t\tfontFamily: 'sans-serif', //Arial,Verdana,Times New Roman,serif,sans-serif,...\n\t\t\tfontStyle: 'bold', //normal,italic,oblique,bold,bolder,lighter,100,200,300,400,500,600,700,800,900\n\t\t\ttype: 'circle',\n\t\t\tposition: 'down', // down, up, left, leftup (upleft)\n\t\t\tanimation: 'slide',\n\t\t\telementId: false,\n\t\t\tdataUrl: false,\n\t\t\twin: window\n\t\t};\n\t\tvar _opt, _orig, _h, _w, _canvas, _context, _img, _ready, _lastBadge, _running, _readyCb, _stop, _browser, _animTimeout, _drawTimeout, _doc;\n\n\t\t_browser = {};\n\t\t_browser.ff = typeof InstallTrigger != 'undefined';\n\t\t_browser.chrome = !!window.chrome;\n\t\t_browser.opera = !!window.opera || navigator.userAgent.indexOf('Opera') >= 0;\n\t\t_browser.ie = /*@cc_on!@*/false;\n\t\t_browser.safari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;\n\t\t_browser.supported = (_browser.chrome || _browser.ff || _browser.opera);\n\n\t\tvar _queue = [];\n\t\t_readyCb = function () {\n\t\t};\n\t\t_ready = _stop = false;\n\t\t/**\n\t\t * Initialize favico\n\t\t */\n\t\tvar init = function () {\n\t\t\t//merge initial options\n\t\t\t_opt = merge(_def, opt);\n\t\t\t_opt.bgColor = hexToRgb(_opt.bgColor);\n\t\t\t_opt.textColor = hexToRgb(_opt.textColor);\n\t\t\t_opt.position = _opt.position.toLowerCase();\n\t\t\t_opt.animation = (animation.types['' + _opt.animation]) ? _opt.animation : _def.animation;\n\n\t\t\t_doc = _opt.win.document;\n\n\t\t\tvar isUp = _opt.position.indexOf('up') > -1;\n\t\t\tvar isLeft = _opt.position.indexOf('left') > -1;\n\n\t\t\t//transform animation\n\t\t\tif (isUp || isLeft) {\n\t\t\t\tfor (var i = 0; i < animation.types['' + _opt.animation].length; i++) {\n\t\t\t\t\tvar step = animation.types['' + _opt.animation][i];\n\n\t\t\t\t\tif (isUp) {\n\t\t\t\t\t\tif (step.y < 0.6) {\n\t\t\t\t\t\t\tstep.y = step.y - 0.4;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstep.y = step.y - 2 * step.y + (1 - step.w);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isLeft) {\n\t\t\t\t\t\tif (step.x < 0.6) {\n\t\t\t\t\t\t\tstep.x = step.x - 0.4;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tstep.x = step.x - 2 * step.x + (1 - step.h);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tanimation.types['' + _opt.animation][i] = step;\n\t\t\t\t}\n\t\t\t}\n\t\t\t_opt.type = (type['' + _opt.type]) ? _opt.type : _def.type;\n\n\t\t\t_orig = link.getIcon();\n\t\t\t//create temp canvas\n\t\t\t_canvas = document.createElement('canvas');\n\t\t\t//create temp image\n\t\t\t_img = document.createElement('img');\n\t\t\tif (_orig.hasAttribute('href')) {\n\t\t\t\t_img.setAttribute('crossOrigin', 'anonymous');\n\t\t\t\t//get width/height\n\t\t\t\t_img.onload = function () {\n\t\t\t\t\t_h = (_img.height > 0) ? _img.height : 32;\n\t\t\t\t\t_w = (_img.width > 0) ? _img.width : 32;\n\t\t\t\t\t_canvas.height = _h;\n\t\t\t\t\t_canvas.width = _w;\n\t\t\t\t\t_context = _canvas.getContext('2d');\n\t\t\t\t\ticon.ready();\n\t\t\t\t};\n\t\t\t\t_img.setAttribute('src', _orig.getAttribute('href'));\n\t\t\t} else {\n\t\t\t\t_img.onload = function () {\n\t\t\t\t\t_h = 32;\n\t\t\t\t\t_w = 32;\n\t\t\t\t\t_img.height = _h;\n\t\t\t\t\t_img.width = _w;\n\t\t\t\t\t_canvas.height = _h;\n\t\t\t\t\t_canvas.width = _w;\n\t\t\t\t\t_context = _canvas.getContext('2d');\n\t\t\t\t\ticon.ready();\n\t\t\t\t};\n\t\t\t\t_img.setAttribute('src', '');\n\t\t\t}\n\n\t\t};\n\t\t/**\n\t\t * Icon namespace\n\t\t */\n\t\tvar icon = {};\n\t\t/**\n\t\t * Icon is ready (reset icon) and start animation (if ther is any)\n\t\t */\n\t\ticon.ready = function () {\n\t\t\t_ready = true;\n\t\t\ticon.reset();\n\t\t\t_readyCb();\n\t\t};\n\t\t/**\n\t\t * Reset icon to default state\n\t\t */\n\t\ticon.reset = function () {\n\t\t\t//reset\n\t\t\tif (!_ready) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_queue = [];\n\t\t\t_lastBadge = false;\n\t\t\t_running = false;\n\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t_context.drawImage(_img, 0, 0, _w, _h);\n\t\t\t//_stop=true;\n\t\t\tlink.setIcon(_canvas);\n\t\t\t//webcam('stop');\n\t\t\t//video('stop');\n\t\t\twindow.clearTimeout(_animTimeout);\n\t\t\twindow.clearTimeout(_drawTimeout);\n\t\t};\n\t\t/**\n\t\t * Start animation\n\t\t */\n\t\ticon.start = function () {\n\t\t\tif (!_ready || _running) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar finished = function () {\n\t\t\t\t_lastBadge = _queue[0];\n\t\t\t\t_running = false;\n\t\t\t\tif (_queue.length > 0) {\n\t\t\t\t\t_queue.shift();\n\t\t\t\t\ticon.start();\n\t\t\t\t} else {\n\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_queue.length > 0) {\n\t\t\t\t_running = true;\n\t\t\t\tvar run = function () {\n\t\t\t\t\t// apply options for this animation\n\t\t\t\t\t['type', 'animation', 'bgColor', 'textColor', 'fontFamily', 'fontStyle'].forEach(function (a) {\n\t\t\t\t\t\tif (a in _queue[0].options) {\n\t\t\t\t\t\t\t_opt[a] = _queue[0].options[a];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tanimation.run(_queue[0].options, function () {\n\t\t\t\t\t\tfinished();\n\t\t\t\t\t}, false);\n\t\t\t\t};\n\t\t\t\tif (_lastBadge) {\n\t\t\t\t\tanimation.run(_lastBadge.options, function () {\n\t\t\t\t\t\trun();\n\t\t\t\t\t}, true);\n\t\t\t\t} else {\n\t\t\t\t\trun();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Badge types\n\t\t */\n\t\tvar type = {};\n\t\tvar options = function (opt) {\n\t\t\topt.n = ((typeof opt.n) === 'number') ? Math.abs(opt.n | 0) : opt.n;\n\t\t\topt.x = _w * opt.x;\n\t\t\topt.y = _h * opt.y;\n\t\t\topt.w = _w * opt.w;\n\t\t\topt.h = _h * opt.h;\n\t\t\topt.len = (\"\" + opt.n).length;\n\t\t\treturn opt;\n\t\t};\n\t\t/**\n\t\t * Generate circle\n\t\t * @param {Object} opt Badge options\n\t\t */\n\t\ttype.circle = function (opt) {\n\t\t\topt = options(opt);\n\t\t\tvar more = false;\n\t\t\tif (opt.len === 2) {\n\t\t\t\topt.x = opt.x - opt.w * 0.4;\n\t\t\t\topt.w = opt.w * 1.4;\n\t\t\t\tmore = true;\n\t\t\t} else if (opt.len >= 3) {\n\t\t\t\topt.x = opt.x - opt.w * 0.65;\n\t\t\t\topt.w = opt.w * 1.65;\n\t\t\t\tmore = true;\n\t\t\t}\n\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t_context.drawImage(_img, 0, 0, _w, _h);\n\t\t\t_context.beginPath();\n\t\t\t_context.font = _opt.fontStyle + \" \" + Math.floor(opt.h * (opt.n > 99 ? 0.85 : 1)) + \"px \" + _opt.fontFamily;\n\t\t\t_context.textAlign = 'center';\n\t\t\tif (more) {\n\t\t\t\t_context.moveTo(opt.x + opt.w / 2, opt.y);\n\t\t\t\t_context.lineTo(opt.x + opt.w - opt.h / 2, opt.y);\n\t\t\t\t_context.quadraticCurveTo(opt.x + opt.w, opt.y, opt.x + opt.w, opt.y + opt.h / 2);\n\t\t\t\t_context.lineTo(opt.x + opt.w, opt.y + opt.h - opt.h / 2);\n\t\t\t\t_context.quadraticCurveTo(opt.x + opt.w, opt.y + opt.h, opt.x + opt.w - opt.h / 2, opt.y + opt.h);\n\t\t\t\t_context.lineTo(opt.x + opt.h / 2, opt.y + opt.h);\n\t\t\t\t_context.quadraticCurveTo(opt.x, opt.y + opt.h, opt.x, opt.y + opt.h - opt.h / 2);\n\t\t\t\t_context.lineTo(opt.x, opt.y + opt.h / 2);\n\t\t\t\t_context.quadraticCurveTo(opt.x, opt.y, opt.x + opt.h / 2, opt.y);\n\t\t\t} else {\n\t\t\t\t_context.arc(opt.x + opt.w / 2, opt.y + opt.h / 2, opt.h / 2, 0, 2 * Math.PI);\n\t\t\t}\n\t\t\t_context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n\t\t\t_context.fill();\n\t\t\t_context.closePath();\n\t\t\t_context.beginPath();\n\t\t\t_context.stroke();\n\t\t\t_context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n\t\t\t//_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\tif ((typeof opt.n) === 'number' && opt.n > 999) {\n\t\t\t\t_context.fillText(((opt.n > 9999) ? 9 : Math.floor(opt.n / 1000)) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n\t\t\t} else {\n\t\t\t\t_context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\t}\n\t\t\t_context.closePath();\n\t\t};\n\t\t/**\n\t\t * Generate rectangle\n\t\t * @param {Object} opt Badge options\n\t\t */\n\t\ttype.rectangle = function (opt) {\n\t\t\topt = options(opt);\n\t\t\tvar more = false;\n\t\t\tif (opt.len === 2) {\n\t\t\t\topt.x = opt.x - opt.w * 0.4;\n\t\t\t\topt.w = opt.w * 1.4;\n\t\t\t\tmore = true;\n\t\t\t} else if (opt.len >= 3) {\n\t\t\t\topt.x = opt.x - opt.w * 0.65;\n\t\t\t\topt.w = opt.w * 1.65;\n\t\t\t\tmore = true;\n\t\t\t}\n\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t_context.drawImage(_img, 0, 0, _w, _h);\n\t\t\t_context.beginPath();\n\t\t\t_context.font = _opt.fontStyle + \" \" + Math.floor(opt.h * (opt.n > 99 ? 0.9 : 1)) + \"px \" + _opt.fontFamily;\n\t\t\t_context.textAlign = 'center';\n\t\t\t_context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n\t\t\t_context.fillRect(opt.x, opt.y, opt.w, opt.h);\n\t\t\t_context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n\t\t\t//_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\tif ((typeof opt.n) === 'number' && opt.n > 999) {\n\t\t\t\t_context.fillText(((opt.n > 9999) ? 9 : Math.floor(opt.n / 1000)) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n\t\t\t} else {\n\t\t\t\t_context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\t}\n\t\t\t_context.closePath();\n\t\t};\n\n\t\t/**\n\t\t * Set badge\n\t\t */\n\t\tvar badge = function (number, opts) {\n\t\t\topts = ((typeof opts) === 'string' ? {\n\t\t\t\tanimation: opts\n\t\t\t} : opts) || {};\n\t\t\t_readyCb = function () {\n\t\t\t\ttry {\n\t\t\t\t\tif (typeof (number) === 'number' ? (number > 0) : (number !== '')) {\n\t\t\t\t\t\tvar q = {\n\t\t\t\t\t\t\ttype: 'badge',\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tn: number\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif ('animation' in opts && animation.types['' + opts.animation]) {\n\t\t\t\t\t\t\tq.options.animation = '' + opts.animation;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ('type' in opts && type['' + opts.type]) {\n\t\t\t\t\t\t\tq.options.type = '' + opts.type;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t['bgColor', 'textColor'].forEach(function (o) {\n\t\t\t\t\t\t\tif (o in opts) {\n\t\t\t\t\t\t\t\tq.options[o] = hexToRgb(opts[o]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t['fontStyle', 'fontFamily'].forEach(function (o) {\n\t\t\t\t\t\t\tif (o in opts) {\n\t\t\t\t\t\t\t\tq.options[o] = opts[o];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_queue.push(q);\n\t\t\t\t\t\tif (_queue.length > 100) {\n\t\t\t\t\t\t\tthrow new Error('Too many badges requests in queue.');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ticon.start();\n\t\t\t\t\t} else {\n\t\t\t\t\t\ticon.reset();\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new Error('Error setting badge. Message: ' + e.message);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_ready) {\n\t\t\t\t_readyCb();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Set image as icon\n\t\t */\n\t\tvar image = function (imageElement) {\n\t\t\t_readyCb = function () {\n\t\t\t\ttry {\n\t\t\t\t\tvar w = imageElement.width;\n\t\t\t\t\tvar h = imageElement.height;\n\t\t\t\t\tvar newImg = document.createElement('img');\n\t\t\t\t\tvar ratio = (w / _w < h / _h) ? (w / _w) : (h / _h);\n\t\t\t\t\tnewImg.setAttribute('crossOrigin', 'anonymous');\n\t\t\t\t\tnewImg.onload=function(){\n\t\t\t\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t\t\t\t_context.drawImage(newImg, 0, 0, _w, _h);\n\t\t\t\t\t\tlink.setIcon(_canvas);\n\t\t\t\t\t};\n\t\t\t\t\tnewImg.setAttribute('src', imageElement.getAttribute('src'));\n\t\t\t\t\tnewImg.height = (h / ratio);\n\t\t\t\t\tnewImg.width = (w / ratio);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new Error('Error setting image. Message: ' + e.message);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_ready) {\n\t\t\t\t_readyCb();\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * Set video as icon\n\t\t */\n\t\tvar video = function (videoElement) {\n\t\t\t_readyCb = function () {\n\t\t\t\ttry {\n\t\t\t\t\tif (videoElement === 'stop') {\n\t\t\t\t\t\t_stop = true;\n\t\t\t\t\t\ticon.reset();\n\t\t\t\t\t\t_stop = false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t//var w = videoElement.width;\n\t\t\t\t\t//var h = videoElement.height;\n\t\t\t\t\t//var ratio = (w / _w < h / _h) ? (w / _w) : (h / _h);\n\t\t\t\t\tvideoElement.addEventListener('play', function () {\n\t\t\t\t\t\tdrawVideo(this);\n\t\t\t\t\t}, false);\n\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new Error('Error setting video. Message: ' + e.message);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_ready) {\n\t\t\t\t_readyCb();\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * Set video as icon\n\t\t */\n\t\tvar webcam = function (action) {\n\t\t\t//UR\n\t\t\tif (!window.URL || !window.URL.createObjectURL) {\n\t\t\t\twindow.URL = window.URL || {};\n\t\t\t\twindow.URL.createObjectURL = function (obj) {\n\t\t\t\t\treturn obj;\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (_browser.supported) {\n\t\t\t\tvar newVideo = false;\n\t\t\t\tnavigator.getUserMedia = navigator.getUserMedia || navigator.oGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n\t\t\t\t_readyCb = function () {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (action === 'stop') {\n\t\t\t\t\t\t\t_stop = true;\n\t\t\t\t\t\t\ticon.reset();\n\t\t\t\t\t\t\t_stop = false;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewVideo = document.createElement('video');\n\t\t\t\t\t\tnewVideo.width = _w;\n\t\t\t\t\t\tnewVideo.height = _h;\n\t\t\t\t\t\tnavigator.getUserMedia({\n\t\t\t\t\t\t\tvideo: true,\n\t\t\t\t\t\t\taudio: false\n\t\t\t\t\t\t}, function (stream) {\n\t\t\t\t\t\t\tnewVideo.src = URL.createObjectURL(stream);\n\t\t\t\t\t\t\tnewVideo.play();\n\t\t\t\t\t\t\tdrawVideo(newVideo);\n\t\t\t\t\t\t}, function () {\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthrow new Error('Error setting webcam. Message: ' + e.message);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (_ready) {\n\t\t\t\t\t_readyCb();\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\t/**\n\t\t * Draw video to context and repeat :)\n\t\t */\n\t\tfunction drawVideo(video) {\n\t\t\tif (video.paused || video.ended || _stop) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//nasty hack for FF webcam (Thanks to Julian Ćwirko, kontakt@redsunmedia.pl)\n\t\t\ttry {\n\t\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t\t_context.drawImage(video, 0, 0, _w, _h);\n\t\t\t} catch (e) {\n\n\t\t\t}\n\t\t\t_drawTimeout = setTimeout(function () {\n\t\t\t\tdrawVideo(video);\n\t\t\t}, animation.duration);\n\t\t\tlink.setIcon(_canvas);\n\t\t}\n\n\t\tvar link = {};\n\t\t/**\n\t\t * Get icon from HEAD tag or create a new <link> element\n\t\t */\n\t\tlink.getIcon = function () {\n\t\t\tvar elm = false;\n\t\t\t//get link element\n\t\t\tvar getLink = function () {\n\t\t\t\tvar link = _doc.getElementsByTagName('head')[0].getElementsByTagName('link');\n\t\t\t\tfor (var l = link.length, i = (l - 1); i >= 0; i--) {\n\t\t\t\t\tif ((/(^|\\s)icon(\\s|$)/i).test(link[i].getAttribute('rel'))) {\n\t\t\t\t\t\treturn link[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\tif (_opt.element) {\n\t\t\t\telm = _opt.element;\n\t\t\t} else if (_opt.elementId) {\n\t\t\t\t//if img element identified by elementId\n\t\t\t\telm = _doc.getElementById(_opt.elementId);\n\t\t\t\telm.setAttribute('href', elm.getAttribute('src'));\n\t\t\t} else {\n\t\t\t\t//if link element\n\t\t\t\telm = getLink();\n\t\t\t\tif (elm === false) {\n\t\t\t\t\telm = _doc.createElement('link');\n\t\t\t\t\telm.setAttribute('rel', 'icon');\n\t\t\t\t\t_doc.getElementsByTagName('head')[0].appendChild(elm);\n\t\t\t\t}\n\t\t\t}\n\t\t\telm.setAttribute('type', 'image/png');\n\t\t\treturn elm;\n\t\t};\n\t\tlink.setIcon = function (canvas) {\n\t\t\tvar url = canvas.toDataURL('image/png');\n\t\t\tif (_opt.dataUrl) {\n\t\t\t\t//if using custom exporter\n\t\t\t\t_opt.dataUrl(url);\n\t\t\t}\n\t\t\tif (_opt.element) {\n\t\t\t\t_opt.element.setAttribute('href', url);\n\t\t\t\t_opt.element.setAttribute('src', url);\n\t\t\t} else if (_opt.elementId) {\n\t\t\t\t//if is attached to element (image)\n\t\t\t\tvar elm = _doc.getElementById(_opt.elementId);\n\t\t\t\telm.setAttribute('href', url);\n\t\t\t\telm.setAttribute('src', url);\n\t\t\t} else {\n\t\t\t\t//if is attached to fav icon\n\t\t\t\tif (_browser.ff || _browser.opera) {\n\t\t\t\t\t//for FF we need to \"recreate\" element, atach to dom and remove old <link>\n\t\t\t\t\t//var originalType = _orig.getAttribute('rel');\n\t\t\t\t\tvar old = _orig;\n\t\t\t\t\t_orig = _doc.createElement('link');\n\t\t\t\t\t//_orig.setAttribute('rel', originalType);\n\t\t\t\t\tif (_browser.opera) {\n\t\t\t\t\t\t_orig.setAttribute('rel', 'icon');\n\t\t\t\t\t}\n\t\t\t\t\t_orig.setAttribute('rel', 'icon');\n\t\t\t\t\t_orig.setAttribute('type', 'image/png');\n\t\t\t\t\t_doc.getElementsByTagName('head')[0].appendChild(_orig);\n\t\t\t\t\t_orig.setAttribute('href', url);\n\t\t\t\t\tif (old.parentNode) {\n\t\t\t\t\t\told.parentNode.removeChild(old);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_orig.setAttribute('href', url);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t//http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb#answer-5624139\n\t\t//HEX to RGB convertor\n\t\tfunction hexToRgb(hex) {\n\t\t\tvar shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\t\t\thex = hex.replace(shorthandRegex, function (m, r, g, b) {\n\t\t\t\treturn r + r + g + g + b + b;\n\t\t\t});\n\t\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t\t\treturn result ? {\n\t\t\t\tr: parseInt(result[1], 16),\n\t\t\t\tg: parseInt(result[2], 16),\n\t\t\t\tb: parseInt(result[3], 16)\n\t\t\t} : false;\n\t\t}\n\n\t\t/**\n\t\t * Merge options\n\t\t */\n\t\tfunction merge(def, opt) {\n\t\t\tvar mergedOpt = {};\n\t\t\tvar attrname;\n\t\t\tfor (attrname in def) {\n\t\t\t\tmergedOpt[attrname] = def[attrname];\n\t\t\t}\n\t\t\tfor (attrname in opt) {\n\t\t\t\tmergedOpt[attrname] = opt[attrname];\n\t\t\t}\n\t\t\treturn mergedOpt;\n\t\t}\n\n\t\t/**\n\t\t * Cross-browser page visibility shim\n\t\t * http://stackoverflow.com/questions/12536562/detect-whether-a-window-is-visible\n\t\t */\n\t\tfunction isPageHidden() {\n\t\t\treturn _doc.hidden || _doc.msHidden || _doc.webkitHidden || _doc.mozHidden;\n\t\t}\n\n\t\t/**\n\t\t * @namespace animation\n\t\t */\n\t\tvar animation = {};\n\t\t/**\n\t\t * Animation \"frame\" duration\n\t\t */\n\t\tanimation.duration = 40;\n\t\t/**\n\t\t * Animation types (none,fade,pop,slide)\n\t\t */\n\t\tanimation.types = {};\n\t\tanimation.types.fade = [{\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.0\n\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 0.1\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 0.2\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 0.3\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 0.4\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 0.5\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 0.6\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 0.7\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 0.8\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 0.9\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 1.0\n\t\t\t}];\n\t\tanimation.types.none = [{\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}];\n\t\tanimation.types.pop = [{\n\t\t\tx: 1,\n\t\t\ty: 1,\n\t\t\tw: 0,\n\t\t\th: 0,\n\t\t\to: 1\n\t\t}, {\n\t\t\t\tx: 0.9,\n\t\t\t\ty: 0.9,\n\t\t\t\tw: 0.1,\n\t\t\t\th: 0.1,\n\t\t\t\to: 1\n\t\t\t}, {\n\t\t\t\tx: 0.8,\n\t\t\t\ty: 0.8,\n\t\t\t\tw: 0.2,\n\t\t\t\th: 0.2,\n\t\t\t\to: 1\n\t\t\t}, {\n\t\t\t\tx: 0.7,\n\t\t\t\ty: 0.7,\n\t\t\t\tw: 0.3,\n\t\t\t\th: 0.3,\n\t\t\t\to: 1\n\t\t\t}, {\n\t\t\t\tx: 0.6,\n\t\t\t\ty: 0.6,\n\t\t\t\tw: 0.4,\n\t\t\t\th: 0.4,\n\t\t\t\to: 1\n\t\t\t}, {\n\t\t\t\tx: 0.5,\n\t\t\t\ty: 0.5,\n\t\t\t\tw: 0.5,\n\t\t\t\th: 0.5,\n\t\t\t\to: 1\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 1\n\t\t\t}];\n\t\tanimation.types.popFade = [{\n\t\t\tx: 0.75,\n\t\t\ty: 0.75,\n\t\t\tw: 0,\n\t\t\th: 0,\n\t\t\to: 0\n\t\t}, {\n\t\t\t\tx: 0.65,\n\t\t\t\ty: 0.65,\n\t\t\t\tw: 0.1,\n\t\t\t\th: 0.1,\n\t\t\t\to: 0.2\n\t\t\t}, {\n\t\t\t\tx: 0.6,\n\t\t\t\ty: 0.6,\n\t\t\t\tw: 0.2,\n\t\t\t\th: 0.2,\n\t\t\t\to: 0.4\n\t\t\t}, {\n\t\t\t\tx: 0.55,\n\t\t\t\ty: 0.55,\n\t\t\t\tw: 0.3,\n\t\t\t\th: 0.3,\n\t\t\t\to: 0.6\n\t\t\t}, {\n\t\t\t\tx: 0.50,\n\t\t\t\ty: 0.50,\n\t\t\t\tw: 0.4,\n\t\t\t\th: 0.4,\n\t\t\t\to: 0.8\n\t\t\t}, {\n\t\t\t\tx: 0.45,\n\t\t\t\ty: 0.45,\n\t\t\t\tw: 0.5,\n\t\t\t\th: 0.5,\n\t\t\t\to: 0.9\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 1\n\t\t\t}];\n\t\tanimation.types.slide = [{\n\t\t\tx: 0.4,\n\t\t\ty: 1,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.9,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 1\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.9,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 1\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.8,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 1\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.7,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 1\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.6,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 1\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.5,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 1\n\t\t\t}, {\n\t\t\t\tx: 0.4,\n\t\t\t\ty: 0.4,\n\t\t\t\tw: 0.6,\n\t\t\t\th: 0.6,\n\t\t\t\to: 1\n\t\t\t}];\n\t\t/**\n\t\t * Run animation\n\t\t * @param {Object} opt Animation options\n\t\t * @param {Object} cb Callabak after all steps are done\n\t\t * @param {Object} revert Reverse order? true|false\n\t\t * @param {Object} step Optional step number (frame bumber)\n\t\t */\n\t\tanimation.run = function (opt, cb, revert, step) {\n\t\t\tvar animationType = animation.types[isPageHidden() ? 'none' : _opt.animation];\n\t\t\tif (revert === true) {\n\t\t\t\tstep = (typeof step !== 'undefined') ? step : animationType.length - 1;\n\t\t\t} else {\n\t\t\t\tstep = (typeof step !== 'undefined') ? step : 0;\n\t\t\t}\n\t\t\tcb = (cb) ? cb : function () {\n\t\t\t};\n\t\t\tif ((step < animationType.length) && (step >= 0)) {\n\t\t\t\ttype[_opt.type](merge(opt, animationType[step]));\n\t\t\t\t_animTimeout = setTimeout(function () {\n\t\t\t\t\tif (revert) {\n\t\t\t\t\t\tstep = step - 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstep = step + 1;\n\t\t\t\t\t}\n\t\t\t\t\tanimation.run(opt, cb, revert, step);\n\t\t\t\t}, animation.duration);\n\n\t\t\t\tlink.setIcon(_canvas);\n\t\t\t} else {\n\t\t\t\tcb();\n\t\t\t\treturn;\n\t\t\t}\n\t\t};\n\t\t//auto init\n\t\tinit();\n\t\treturn {\n\t\t\tbadge: badge,\n\t\t\tvideo: video,\n\t\t\timage: image,\n\t\t\twebcam: webcam,\n\t\t\treset: icon.reset,\n\t\t\tbrowser: {\n\t\t\t\tsupported: _browser.supported\n\t\t\t}\n\t\t};\n\t});\n\n\t// AMD / RequireJS\n\tif (typeof define !== 'undefined' && define.amd) {\n\t\tdefine([], function () {\n\t\t\treturn Favico;\n\t\t});\n\t}\n\t// CommonJS\n\telse if (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = Favico;\n\t}\n\t// included directly via <script> tag\n\telse {\n\t\tthis.Favico = Favico;\n\t}\n\n})();\n"],"sourceRoot":""}